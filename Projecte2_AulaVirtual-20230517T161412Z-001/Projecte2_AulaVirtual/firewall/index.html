<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Firewall Pfsense - Projecte 2 - Aula Virtual</title>
  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Firewall Pfsense";
    var mkdocs_page_input_path = "firewall/index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../introduccio/" class="icon icon-home"> Projecte 2 - Aula Virtual</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../introduccio/">Introducció</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../objectiu/">Objectiu</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../programari/">Programari</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../procediment/">Procediment</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../recursos/">Recursos necessaris</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../xarxa/">Esquema de xarxa</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Firewall Pfsense</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#firewall-i-servei-dns">Firewall i servei DNS:</a></li>
    

    <li class="toctree-l2"><a href="#programari-utilitzat">Programari utilitzat:</a></li>
    

    <li class="toctree-l2"><a href="#configuracio-dinterficies">Configuració d’interfícies:</a></li>
    

    <li class="toctree-l2"><a href="#administracio-grafica-del-servei-amb-pfsense">Administració gràfica del servei amb Pfsense:</a></li>
    

    <li class="toctree-l2"><a href="#configuracio-dns-amb-pfsense">Configuració DNS amb Pfsense:</a></li>
    

    <li class="toctree-l2"><a href="#normes-del-firewall">Normes del Firewall:</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../avirtual/">Aula Virtual</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../siem/">Configuració SIEM</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../conclusio/">Conclusió</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../introduccio/">Projecte 2 - Aula Virtual</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../introduccio/">Docs</a> &raquo;</li>
    
      
    
    <li>Firewall Pfsense</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="firewall-i-servei-dns">Firewall i servei DNS:</h2>
<h1 id="programari-utilitzat">Programari utilitzat:</h1>
<p>La màquina Firewall tindrà instal·lat el software de codi obert Pfsense, amb aquest gestionarem les normes d’entrada i sortida de paquets per tenir controlat que pot i que no pot entrar o sortir de la màquina.</p>
<p>Aquest programari també ens permet configurar un servidor DNS, d’aquesta forma podriem fer que una màquina virtual client utilitzant la màquina del firewall com a servidor DNS pugui arribar al moodle del nostre institut resolent el nom de domini en comptes de la IP.</p>
<h1 id="configuracio-dinterficies">Configuració d’interfícies:</h1>
<p><strong>Xarxa WAN</strong> - Adaptador Pont: 172.22.9.250/24</p>
<p><strong>Xarxa LAN</strong> - Adaptador xarxa interna: 192.168.1.20/24</p>
<p><img alt="firewall1" src="firewall1.png" /></p>
<h1 id="administracio-grafica-del-servei-amb-pfsense">Administració gràfica del servei amb Pfsense:</h1>
<p><img alt="firewall2" src="firewall2.png" /></p>
<p><img alt="firewall3" src="firewall3.png" /></p>
<h1 id="configuracio-dns-amb-pfsense">Configuració DNS amb Pfsense:</h1>
<p>Hem implementat una redirecció DNS amb el programari Pfsense per així fer que tots els ordinadors que obtinguin la IP 192.168.1.20 com a servidor DNS tinguin la possibilitat de redirigir les peticions d’adreces que no tingui el nostre servidor ( Totes menys l’adreça del nostre servidor Moodle) als servidors de Cloudflare 1.1.1.1, 1.0.0.1 .</p>
<p>És molt important el ordre al aplicar les normes del Firewall ja que pot afectar en el rendiment d’aquest, com podem veure en aquesta captura nosaltres hem deixat la norma per defecte d’acceptar qualsevol petició LAN IPv4 i IPv6 al final per no interferir en les opcions més restrictives com la del DNS.</p>
<p><img alt="firewall4" src="firewall4.png" /></p>
<p>Tenim com a mode de DNS que primer intenti resoldre la query amb el nostre servidor i si no és possible que ho resolgui amb els servidors de CloudFlare, d’aquesta forma quan registrem el nostre nom de domini a aquest DNS ho resoldrà correctament.</p>
<p><img alt="firewall5" src="firewall5.png" /></p>
<p>Aquí podem veure que la petició és resol correctament enviant la petició als servidors de Cloudflare.</p>
<p><img alt="firewall6" src="firewall6.png" /></p>
<h1 id="normes-del-firewall">Normes del Firewall:</h1>
<p>És important al configurar el Firewall que no deixem les normes per defecte, aquestes deixen que qualsevol cosa que no estigui permesa entri igualment.
En el nostre cas hem configurat la normativa per a rebutjar totes les peticions que entrin amb IPv4 i directament bloquejar totes les peticions IPv6 ja que no utilitzarem aquest protocol és millor tenir bloquejat l’entrada de les peticions.</p>
<p><img alt="firewall7" src="firewall7.png" /></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../avirtual/" class="btn btn-neutral float-right" title="Aula Virtual">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../xarxa/" class="btn btn-neutral" title="Esquema de xarxa"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../xarxa/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../avirtual/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2023-05-17 15:47:31
-->
